app="undefined"!=typeof app?app:{},function(){"use strict";return this.registry=this.templates||{},this.templates=this.templates||{},this.ifNotError=function(t,i){i instanceof Error?alert(i):t(i)}.bind(this),this.simplyReturn=function(t){return t}.bind(this),this.isProduction=function(){var t=location.href;return-1===t.indexOf("localhost")&&-1===t.indexOf("127.0.0.1")}(),this.clone=function(t){return JSON.parse(JSON.stringify(t))},this.confirm=function(t,i){i(window.confirm(t))}.bind(this),this.extend=function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);return t}.bind(this),this}.call(app),app="undefined"!=typeof app?app:{},function(){"use strict";function t(){return this.state.redirect=location.href,!0}function i(){var t=location.href,i=t.indexOf("/#");return-1===i?(t.substr(t.length-1)&&(t=t.substr(0,t.length-1)),t):t.substr(0,i)}function e(t){var e=this.getFormFields(t.target),n=e.email,r=this.models.user;if(r.email.validate(n)){var o=(this.state.redirect?this.state.redirect:location.href).replace("#join",""),a=O.TPL.translate("mailSubject.joinTheConversation"),h=O.TPL.render({joinMail:{baseURL:i(),redirect:encodeURIComponent(o),expire:moment().add(1,"hours").format("k:mm (MMM Do YYYY)")}});this.api.postConnectionToken(n,a,h,s.bind(this))}else this.setValidationMessage(O.ELM.joinEmail,O.TPL.translate("error.pleaseUseProperEmail"));return!1}function s(t){t instanceof Error?(this.notify({notifySystem:{message:O.TPL.translate("notify.failedToMailToken"),status:"error"}}),this.log(t,this.logType.debug)):this.notify({notifySystem:{message:O.TPL.translate("notify.lookForYourJoinEmail"),status:"success"}})}function n(t,i){var e=this.state.connect;e&&e.length>0?this.api.getAuthToken(e,r.bind(this,i)):this.updateURL("")}function r(t,i){i instanceof Error?(this.log("error connecting",this.logType.error),this.log(i,this.logType.debug)):(O.COOKIE("authToken",i.token,90),this.api.clearCache(),location.href=this.state.redirect&&this.state.redirect.length>0?this.state.redirect:getDomain()),t()}function o(t){return this.signout(),this.goToStateRedirect(),!1}return this.registry=this.registry||{},this.registry.getRedirectionURL={attributes:{onclick:t.bind(this)}},this.registry.frmJoin={attributes:{onsubmit:e.bind(this)}},this.registry.userConnectRedirectPage={preprocess:n.bind(this)},this.registry.userConnectPage={preprocess:n.bind(this)},this.registry.btnSignOut={attributes:{onclick:o.bind(this)}},this.signout=function(){O.COOKIE("authToken",""),this.state.email="",this.api.clearCache()}.bind(this),this}.call(app),app="undefined"!=typeof app?app:{},function(){"use strict";function t(t,e){var s=this.state.community,n=this.registry.topicList.cached;n?e({topics:{topic:this.getFilteredItems.call(this,n,o)}}):this.api.getCommunityTopics(s,i.bind(this,e))}function i(t,i){if(i instanceof Error)return this.log("failed to load topic list",this.logType.error),this.log(i,this.logType.debug),t({topics:{topic:[]}});this.state.communityTopics=i;var e,s,n,r,a,h=i.topics||[],c=i.authors||{},d=i.communities;void 0===d&&(n=this.state.communityJSON&&!!this.state.communityJSON.membership,r=n?this.state.communityJSON.membership.id:!1),this.addImagesToAuthors(c);for(var u=0,m=h.length;m>u;u++)e=h[u],e.author=c[e.authorId],e.hasCommunity=void 0!==d,e.hasCommunity&&(a=d[e.communityId],e.community=a),e.mdContent=this.htmlize(e.content),e.time=moment(e.modified).format("MMM Do YY, h:mma"),e.relativeTime=moment(e.modified).fromNow(),e.images={image:this.getAttachmentsURL(e.images)},e.isMember=n,n&&(e.isReadMode=!0,e.isEditable=r===e.author.id&&0===e.opinions&&0===e.endorse,e.isEditable&&(e.contentLength=this.getPostLengthString(e.content,this.state.communityJSON.topicLength)),s=i.viewpoints[e.id],s?(e.isEndorsed=!!s.endorse,e.isFollowed=!!s.follow,e.isRead=!!s.read):e.isEndorsed=e.isFollowed=e.isRead=!1);t({content:"",topics:{topic:this.getFilteredItems.call(this,h,o)}})}function e(t){var i,e=t.target,n=this.getFormFields(e),r=n.content,o=this.models.topic.content.validate(r,this.state.communityJSON);return o instanceof Error||(i={topic:{communityId:this.state.community,content:r,status:"published"},images:{added:this.getAttachedImages(e),removed:this.getDetachedImages(e)}},n.id.length>0&&(i.topic.id=n.id),this.api.setTopic(i,s.bind(this))),!1}function s(){delete this.state.communityTopics,this.register(O.ELM.communityTopics)}function n(t){o.content=t.target.value,this.registry.topicList.cached=this.state.communityTopics.topics,this.register(document.querySelector('[data-register="topicList"]')),delete this.registry.topicList.cached}function r(t,e){var s=this.registry.topTopics.cached;s?e({topics:{topic:this.getFilteredItems.call(this,s,o)}}):this.api.getTopTopics(1,100,i.bind(this,e))}this.registry=this.registry||{};var o={};return this.registry.topicList={preprocess:t.bind(this)},this.processTopicList=i.bind(this),this.registry.frmSetTopic={attributes:{onsubmit:e.bind(this)}},this.registry.filterTopics={attributes:{onkeyup:n.bind(this)}},this.registry.topTopics={preprocess:r.bind(this),template:"topicList"},this}.call(app),app="undefined"!=typeof app?app:{},function(){function t(t,e){var s=this.registry.topTags.cached;s?e({tags:{tag:s}}):this.api.getTopTags(1,100,i.bind(this,e))}function i(t,i){var n,r,o,a;if(i instanceof Error)return this.log("failed to load tag list",this.logType.error),this.log(i,this.logType.debug),t({tags:{tag:[]}});r=i.tags,o=Object.keys(r),o.sort(e),a=s(o,r);for(var h=0,c=o.length;c>h;h++)n=o[h],o[h]={string:n,score:Math.round(r[n]/a*10)};t({tags:{tag:o}})}function e(t,i){return t.toLowerCase().localeCompare(i.toLowerCase())}function s(t,i){for(var e=0,s=0,n=t.length;n>s;s++)e=Math.max(e,i[t[s]]);return e}function n(t){var i=t.target;i.setAttribute("aria-pressed","true"!==i.getAttribute("aria-pressed")),r.call(this,i.closest('[role="list"]'))}function r(t){for(var i=0,e=[],s=t.closest("[aria-controls]").getAttribute("aria-controls"),n=t.querySelectorAll('[aria-pressed="true"]'),r=n.length;r>i;i++)e.push(n[i].innerHTML);e.length>0?this.api.getTopicsByTag(e,this.processTopicList.bind(this,o.bind(this,O.ELM[s]))):this.register(O.ELM[s])}function o(t,i){t.innerHTML=O.TPL.render({topicList:i})}return this.registry=this.registry||{},this.registry.topTags={preprocess:t.bind(this),template:"tagCloud"},this.registry.filterByTag={attributes:{onclick:n.bind(this)}},this}.call(app),app="undefined"!=typeof app?app:{},function(){"use strict";function t(t,i,e){if(void 0===i){if(void 0===e)return;throw this.log("no template for "+i,this.logType.debug),new Error("template-not-found")}try{if(this.templates[i]){var s={};s[i]=e,t.innerHTML=O.TPL.render(s),O.ELM.refresh()}else this.log("no template for "+i,this.logType.debug);this.registerChildrenOf(t)}catch(n){this.log(n,this.logType.debug),this.log(t,this.logType.debug),this.log(i,this.logType.debug),this.log(e,this.logType.debug)}}function i(i){var e=i.getAttribute("data-register");void 0===e&&(e=i.getAttribute("id")),O.CSS.remove(i,"register").add(i,"registering");var s=this.registry[e];if(void 0!==s){if(void 0!==s.attributes){var n=s.attributes;for(var r in n)i[r]=n[r]}void 0!==s.template&&(e=s.template)}if(void 0===s){if(void 0===this.templates[e])throw new Error("cannot register template "+e+" (undefined)");t.call(this,i,e,{})}else void 0!==s.preprocess&&s.preprocess.call(this,i,t.bind(this,i,e));O.CSS.remove(i,"registering").add(i,"registered")}return this.registry=this.registry||{},this.templates=this.templates||{},this.registerS=function(t){for(var i=0,e=t.length;e>i;i++){var s=t[i];"none"!==s.style.display&&this.register(s)}}.bind(this),this.registerChildrenOf=function(t){this.registerS(t.querySelectorAll("[data-register]:not(.js-registered)"))}.bind(this),this.register=i.bind(this),this.onWindowResize=function(){this.registerS(O.ELM.per(".js-register"))}.bind(this),window.onresize=O.EVT.subscribe("window.resize",this.onWindowResize).getDispatcher("window.resize"),this}.call(app),app="undefined"!=typeof app?app:{},function(){function t(t){var i=t.target,e=i.value,s=i.closest("[data-count]"),n=s.getAttribute("data-count");counterContent=n.substr(n.indexOf("/"));var r=+n.replace(/\D/g,""),o=n.indexOf(O.TPL.translate("label.words"))>-1?this.countWords(e):this.countCharacters(e);s.setAttribute("data-count",o+counterContent),o>r?(s.setAttribute("data-error",O.TPL.translate("Errors.tooLong")),i.setAttribute("data-valid",!1)):(s.removeAttribute("data-error"),i.setAttribute("data-valid",!0))}function i(t,i){var e=i.target.closest('[data-type="'+t+'"]'),s=e.querySelector(".js-content"),r=e.querySelector('[data-register="frmSet'+n(t)+'"]');"true"===s.getAttribute("data-hidden")?(r.setAttribute("data-hidden","true"),s.removeAttribute("data-hidden")):(s.setAttribute("data-hidden","true"),r.removeAttribute("data-hidden"))}function e(t,i){var e=i.target.closest("[data-register]"),n=e.closest(".js-item[data-type][data-id]");"true"===e.getAttribute("data-value")&&(t="un"+t),this.api.setAttribute(n.getAttribute("data-type"),n.getAttribute("data-id"),t,s.bind(this,e,t))}function s(t,i,e){t.setAttribute("data-value",e.viewpoint[i]);var s=O.ELM["".concat(e.subjectType,"_",e.subjectId,"_",e.attribute,"_count")];void 0!==s&&(s.innerHTML=e.count)}function n(t){return t.substr(0,1).toUpperCase()+t.substr(1)}return this.registry=this.registry||{},this.getPostLengthString=function(t,i){return i>0?this.countWords(t)+"/"+Math.abs(i)+" "+O.TPL.translate("label.words"):this.countCharacters(t)+"/"+Math.abs(i)+" "+O.TPL.translate("label.characters")}.bind(this),this.registry.postContent={attributes:{onkeyup:t.bind(this)}},this.registry.editTopic={attributes:{onclick:i.bind(this,"topic")}},this.registry.editOpinion={attributes:{onclick:i.bind(this,"opinion")}},this.registry.editComment={attributes:{onclick:i.bind(this,"comment")}},this.registry.endorse={attributes:{onclick:e.bind(this,"endorse")}},this.registry.follow={attributes:{onclick:e.bind(this,"follow")}},this.registry.read={attributes:{onclick:e.bind(this,"read")}},this.addImagesToAuthors=function(t){for(var i,e,s=Object.keys(t),n=0,r=s.length;r>n;n++)i=s[n],e=t[i],e.image=e.hasImage?this.api.getProfileImageURL(i):""}.bind(this),this.getAttachmentsURL=function(t){if(t){for(var i=0,e=t.length;e>i;i++)t[i]={id:t[count],src:this.api.getAttachmentURL(t[count]),status:"existing"};return t}return[]}.bind(this),this.getAttachedImages=function(t){var i,e=t.querySelectorAll('[data-role="attachment"][data-status="added"]'),s=e.length,n=[];for(i=0;s>i;i++)n[i]=e[i].querySelector("img").src;return n}.bind(this),this.getDetachedImages=function(t){var i,e=t.querySelectorAll('[data-role="attachment"][data-status="removed"]'),s=e.length,n=[];for(i=0;s>i;i++)n[i]=e[i].getAttribute("data-id");return n}.bind(this),this.htmlize=function(t){return marked(t).replace(/(^|\W)(#[a-z\d][\w-]*)/gi,'$1<span class="tag">$2</span>')}.bind(this),this}.call(app),app="undefined"!=typeof app?app:{},function(){"use strict";function t(t,i,e){var s,n,r,o=this.api.getProfileImageURL,a=this.state.communityJSON,h=a.membership?a.membership.id:!1,c=e.opinions||[],d=e.authors||{};this.addImagesToAuthors(d);for(var u=0,m=c.length;m>u;u++)s=c[u],s.author=d[s.authorId],s.mdContent=this.htmlize(s.content),s.isMember=!!h,s.isMine=h===s.author.id,s.time=moment(s.modified).format("MMM Do YY, h:mma"),s.relativeTime=moment(s.modified).fromNow(),s.hasStats=!0,s.images={image:this.getAttachmentsURL(s.images)},s.isMine&&(r=s,s.isEditable=0===s.comments&&0===s.endorse,c.splice(count,1)),n=e.viewpoints[s.id],n?(s.isEndorsed=!!n.endorse,s.isFollowed=!!n.follow,s.isRead=!!n.read):s.isEndorsed=s.isFollowed=s.isRead=!1;h&&(void 0===r&&(r={author:{name:a.membership.name,image:o(h)},content:"",mdContent:"",images:{image:[]},id:"",isMine:!0,isEditable:!0,relativeTime:""}),r.topicId=t,r.isReadMode=!0,r.contentLength=this.getPostLengthString(r.content,a.opinionLength),c.unshift(r)),i({opinions:{opinion:c}})}function i(t){var i=t.target,s={opinion:this.getFormFields(i),images:{added:this.getAttachedImages(i),removed:this.getDetachedImages(i)}};return 0===s.opinion.id.length&&delete s.opinion.id,this.api.setOpinion(s,e.bind(this,i,void 0===s.opinion.id)),!1}function e(t,i,e){if(e instanceof Error)this.log(e,this.logType.error);else{var s=t.closest('[data-id][data-type="topic"]'),n=s.getAttribute("data-id");i&&(this.updateCount(s,"opinion",1),this.removeArchiveButton("topic",n)),this.register(O.ELM["".concat("topic-",n,"-opinions")])}}return this.registry=this.registry||{},this.registry.opinionList={preprocess:function(i,e){var s=i.getAttribute("data-topic-id");this.api.getTopicOpinions(s,t.bind(this,s,e))}.bind(this)},this.registry.frmSetOpinion={attributes:{onsubmit:i.bind(this)}},this}.call(app),app="undefined"!=typeof app?app:{},function(){"use strict";function t(t){return O.DOM.remove(t.target.closest(".notification")),!1}return this.registry=this.registry||{},this.notify=function(t){var i=O.ELM.notifications;void 0===i&&(i=O.ELM.appContainer),O.DOM.append(i,O.TPL.render(t)),O.ELM.refresh(),this.registerChildrenOf(i)}.bind(this),this.registry.closeNotification={attributes:{onclick:t.bind(this)}},this}.call(app),app="undefined"!=typeof app?app:{},function(){"use strict";this.registry=this.registry||{},this.goToStateRedirect=function(){var t=this.state.redirect?this.state.redirect:"";history.pushState({},t,location.href.split("#")[0]+"#"+t),this.register(O.ELM.appContainer)}.bind(this),this.getPathFromURL=function(){return location.href.replace(new RegExp("(https?:\\/\\/)|("+location.host+"\\/)","g"),"").split("#")[0].split("?")[0]}.bind(this),this.extractArgumentsFromLocationHash=function(){for(var t=/\+/g,i=/([^\/:]+):?([^\/]*)/g,e=function(i){return decodeURIComponent(i.replace(t," "))},s=window.location.hash.substring(1),n=[],r=i.exec(s);r;){var o={key:e(r[1]),value:e(r[2])};n.push(o),r=i.exec(s)}return n}.bind(this);var t=function(){for(var t=/\+/g,i=/([^&=]+)=?([^&]*)/g,e=function(i){return decodeURIComponent(i.replace(t," "))},s=window.location.search.substring(1),n={},r=i.exec(s);r;)n[e(r[1])]=e(r[2]),r=i.exec(s);return n},i=function(t,i){return decodeURIComponent(i.replace(t," "))},e=function(){for(var t=/\+/g,e=/([^\/:]+):?([^\/]*)/g,s=i.bind(this,t),n=window.location.hash.substring(1),r={},o=e.exec(n);o;)r[s(o[1])]=s(o[2]),o=e.exec(n);return r};return this.getMappedArguments=function(){return this.extend(t(),e())}.bind(this),this}.call(app),app="undefined"!=typeof app?app:{},function(){"use strict";function t(t){return!0}function i(t){return!0}function e(t){return void 0===t||i(t)}function s(t,i){if(0===i)return!0;var e=i>0?n(t):r(t);return e<=Math.abs(i)}function n(t){var i=o(t);return i.length?i.split(" ").length:0}function r(t){return o(t).length}function o(t){return t?marked(t.trim()).replace(/<(?:.|\n)*?>/gm,"").replace(/[^(\s\w)]+/gm," "):""}var a='((([^<>()[\\]\\\\.,;:\\s@\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\"]+)*)|(\\".+\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,})))';this.models=this.models||{};var h=this.models;this.countWords=n,this.countCharacters=r;new RegExp("\\((.*?)\\)\\[(.*?)\\]","g");return h.user={status:{"enum":{active:"active",suspended:"suspended",archived:"archived"},validate:function(t){return mode.user.status["enum"].indexOf(t)>-1}},created:{},modified:{},lastLogin:{},email:{validate:function(t){return t.match(a)?!0:void 0}},password:{validate:function(t){return t&&t.length>0}},birthDate:{},isFemale:{}},h.community={},h.membership={},h.topic={content:{validate:function(t,i){return s(t,i.topicLength)?0===t.length?new Error("error.tooShort"):!0:new Error("error.tooLong")}}},h.opinion={id:{validate:e},topicId:{validate:i},content:{validate:function(t,i){return s(t,i.opinionLength)?!0:new Error("error.tooLong")}}},h.comment={id:{validate:e},opinionId:{validate:i},parentId:{validate:e},content:{validate:function(t,i){return s(t,i.commentLength)?!0:new Error("error.tooLong")}}},h.feedback={id:{validate:e},image:{validate:t},content:{validate:function(t){return t>0}}},this}.call(app),app="undefined"!=typeof app?app:{},function(){"use strict";return this.registry=this.registry||{},this.ifNotError=function(t,i){i instanceof Error?alert(i):t(i)}.bind(this),this.simplyReturn=function(t){return t}.bind(this),this.isProduction=function(){var t=location.href;return-1===t.indexOf("localhost")&&-1===t.indexOf("127.0.0.1")}(),this.clone=function(t){return JSON.parse(JSON.stringify(t))},this.confirm=function(t,i){i(window.confirm(t))}.bind(this),this.extend=function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);return t}.bind(this),this}.call(app),app="undefined"!=typeof app?app:{},function(){"use strict";function t(t,i){document.title=O.TPL.translate("title.messages"),i()}return this.registry=this.registry||{},this.registry.messagesPage={preprocess:t},this}.call(app),app="undefined"!=typeof app?app:{},function(){"use strict";function t(t,i){document.title=O.TPL.translate("title.settings"),i()}return this.registry=this.registry||{},this.registry.mePage={preprocess:t},this}.call(app),function(){"use strict";function t(t,i){this.state.user=i.user,t()}function i(){return history.back(),!1}function e(t,i){document.title=O.TPL.translate("title.pageNotFound"),i({isAuthenticated:this.isAuthenticated()})}function s(){return this.log("not yet implemented",this.logType.error),!1}function n(t){var i=t.target.closest('[data-register="archive"]');if(i){var e=i.getAttribute("data-type"),s=i.getAttribute("data-id");this.api.archive(e,s,r.bind(this,e,s))}else this.log("failed to find archive button",this.logType.debug),this.log(i,this.logType.debug)}function r(t,i){var e;"topic"===t?e=O.ELM[t+"-"+i]:(e=O.ELM[t+"-"+i].parentNode.closest(".js-item[data-id][data-type]"),this.updateCount(e,t,-1)&&("opinion"!==t?O.DOM.remove(O.ELM[t+"-"+i]):(e.querySelector(".js-opinion-content").value="",e.querySelector(".attribute.time").innerHTML=""))),this.register(e.closest(".js-list"))}function o(t){var i=t.target.closest("[data-register]"),e=O.ELM[i.getAttribute("data-target")];if("true"===e.getAttribute("data-hidden")){O.CSS.add(i,"toggled"),e.removeAttribute("data-hidden");var s=e.getAttribute("data-on-toggle");s&&(e.setAttribute("data-register",s),this.register(e))}else O.CSS.remove(i,"toggled"),e.setAttribute("data-hidden","true"),e.removeAttribute("data-register")}function a(t,i){void 0!==O.ELM.connectionError&&O.DOM.remove(O.ELM.connectionError),this.state.username=i.username,t&&t()}this.registry=this.registry||{},this.state=this.state||{},this.registry.appContainer={preprocess:function(i,e){document.title=O.TPL.translate("app.title"),this.state=this.extend(this.state,this.getMappedArguments());var s=this.isAuthenticated(),n=e.bind(e,{showUserDetailsInHeader:s,pageTemplate:this.getPageTemplateName()});s?this.api.getUser(t.bind(this,n)):n()}.bind(this)},this.registry.btnCancel={attributes:{onclick:i}},this.registry.notFoundPage={preprocess:e.bind(this)},this.registry.frmPageNotFound={attributes:{onsubmit:s}},this.registry.pageNotFoundURL={attributes:{value:window.location.hash}},this.isAuthenticated=function(){var t=O.COOKIE("authToken");return t.length>0}.bind(this),this.handleUnauthorized=function(){O.ELM.pageContainer?(this.state.redirect=location.href,this.updateURL("join")):(this.signout(),this.register(O.ELM.appContainer))}.bind(this),this.updateURL=function(t){history.pushState({},t,location.href.split("#")[0]+"#"+t),this.renderPage()}.bind(this),this.getPageTitleFromHash=function(t){if(t.length){for(var i=t[0].key,e=1;e<t.length;e++){var s=t[e].key;i+=" "+s.substr(0,1).toUpperCase()+s.substr(1)}return i}return""}.bind(this),this.getPageTemplateName=function(){var t=this.extractArgumentsFromLocationHash(),i=this.getPageTitleFromHash(t),e=(i.length?i.replace(/\s/g,""):"home")+"Page";if(O.ELM.appContainer.setAttribute("data-section",t.length>0?t[0].key:"home"),-1===O.TPL.list().indexOf(e)){var s=this.registry[e];void 0!==s&&void 0!==s.preprocess?s.preprocess(null,function(){}):(console.log(this.registry),this.log("trying to access "+e,this.logType.debug),e="notFoundPage")}return e}.bind(this),this.renderPage=function(){var t=this.getPageTemplateName();this.state=this.extend(this.state,this.getMappedArguments()),O.ELM.pageContainer.setAttribute("data-register",t),this.register(O.ELM.pageContainer)}.bind(this),window.onhashchange=this.renderPage.bind(this),this.registry.archive={attributes:{onclick:n.bind(this)}},this.removeArchiveButton=function(t,i){var e=document.querySelector("".concat('[data-register="archive"][data-type="',t,'"][data-id="',i,'"]'));e&&O.DOM.remove(e)},this.registry.toggle={attributes:{onclick:o.bind(this)}},this.updateCount=function(t,i,e){if(t){var s=t.querySelector('[data-role="'+i+'-count"]');if(s){var n=+s.innerHTML+e;return s.innerHTML=n,n}}return 0}.bind(this),this.ping=function(t){this.api.ping(a.bind(this,t))}.bind(this),this.registry.ping={preprocess:function(t,i){t.onclick=O.EVT.subscribe("ping",this.api.ping.bind(this,a)).getDispatcher("ping"),i()}.bind(this)}}.call(function(t){var i="undefined"!=typeof window?window:module?module.exports:i;return void 0===i[t]&&(i[t]={}),i[t]}("app")),app="undefined"!=typeof app?app:{},function(){"use strict";return this.registry=this.registry||{},this.logType={debug:"debug",system:"system",community:"community",message:"message",score:"score",error:"error"},this.log=function(t,i,e){var s=this.logType;switch(void 0===i&&(i=s.system),i){case s.debug:console.debug(t);break;case s.system:this.notify({notifySystem:{message:t,status:"info"}});break;case s.community:this.notify({notifyCommunity:{message:t,status:"info"}});break;case s.message:this.notify({notifyMessage:{message:t,status:"info"}});break;case s.score:this.notify({notifyScore:{message:t,status:"info"}});break;case s.error:t instanceof Error&&(console.debug(t),t=t.message),this.notify({notifySystem:{message:t,status:"error"}});break;default:this.isProduction||(void 0===e?console.log(i+": "+t):console.log(i+": "+t,e))}return t}.bind(this),this}.call(app),function(){"use strict";function t(t){for(var i={},e=0,s=t.length;s>e;e++)i[t[e]]=!0;return i}function i(i){--i.progress||(this.templates=t(O.TPL.list()),O.ELM.refresh(),this.register(O.ELM.appContainer))}return this.registry=this.registry||{},this.state=this.state||{},this.templates=this.templates||{},this.onConnectionError=function(){void 0===O.ELM.connectionError&&this.notify({notifyErrorConnection:{}})}.bind(this),this.init=function(){var t={progress:3};O.EVT.subscribe("window.onload",i.bind(this,t)).subscribe("TPL.templatesLoaded",i.bind(this,t)).subscribe("TPL.languageLoaded",i.bind(this,t)).subscribe("connection-error",this.onConnectionError),O.TPL.load("templates.html"),O.TPL.setLocale("en-us"),O.TPL.loadLanguage("i18n/en-us.json")}.bind(this),this.init(),this}.call(function(t){var i="undefined"!=typeof window?window:module?module.exports:i;return void 0===i[t]&&(i[t]={}),i[t]}("app")),app="undefined"!=typeof app?app:{},function(){"use strict";function t(t,e){s.call(this,i.bind(this,e.target.closest('[data-role="imageUploader"]')),t)}function i(t,i){var e=t.querySelector('[data-role="previews"]'),s=O.TPL.render({imagePreview:{src:i,status:"added"}});O.DOM.append(e,s);e.querySelectorAll("[data-register]");this.registerChildrenOf(e)}function e(t){s(t.target)}function s(t,i){var e=O.DOM.create("input",{type:"file",accept:"image/*"});return i&&e.setAttribute("multiple","true"),e.onchange=n.bind(this,t),e.click(),!1}function n(t,i){var e,s,n,o=i.target.files,a=o.length;for(n=0;a>n;n++)s=o[n],e=new FileReader,e.onload=r.bind(this,t),e.readAsDataURL(s);return!1}function r(t,i){try{var e=i.target.result,s="function"==typeof t?{width:!1,height:!1}:t.getBoundingClientRect();d.call(this,e,s.width,s.height,o.bind(this,t))}catch(n){this.log(n.message,this.logType.error)}return!1}function o(t,i){var e;"function"==typeof t?t(i):(t.src=i,t.setAttribute("data-dirty",!0),e=document.querySelector('[data-register="imageRemove"][data-target="'+t.id+'"]'),e&&e.removeAttribute("disabled"))}function a(t){var i=t.target,e=O.ELM[i.getAttribute("data-target")];return e.removeAttribute("src"),e.setAttribute("data-dirty","true"),i.setAttribute("disabled","disabled"),!1}function h(t){var i=O.ELM[t.target.getAttribute("data-target")];return i.src=this.api.getProfileImageURL(this.state.membershipJSON.id),i.setAttribute("data-dirty","false"),document.querySelector('[data-register="imageRemove"][data-target="'+i.id+'"]').removeAttribute("disabled"),!1}function c(t){var i=t.target,e=O.ELM[i.getAttribute("data-target")],s=e.getBoundingClientRect();return d.call(this,i.src,s.width,s.height,o.bind({},e)),!1}function d(t,i,e,s){var n=new Image;n.setAttribute("crossOrigin","anonymous"),n.onload=u.bind(this,n,i,e,s),n.src=t}function u(t,i,e,s){if(t.width>1e3||t.height>1e3)return void this.log(O.TPL.translate("error.imageTooBig").replace("[width]",1e3).replace("[height]",1e3),this.logType.error);i===!1&&(i=t.width),e===!1&&(e=t.height);var n=1,r=document.createElement("canvas");r.style.display="none",document.body.appendChild(r);var o=r.getContext("2d");o.drawImage(t,0,0);var a=document.createElement("canvas");a.style.display="none",document.body.appendChild(a);var h=r.getContext("2d"),c=a.getContext("2d");t.width>i?n=i/t.width:t.height>e&&(n=e/t.height),a.width=t.width,a.height=t.height,c.drawImage(t,0,0);var d=t.width*n,u=t.height*n;r.width=i,r.height=e,h.drawImage(a,(i-d)/2,(e-u)/2,d,u);var m=r.toDataURL("image/png");document.body.removeChild(r),document.body.removeChild(a),s(m)}function m(t){var i=t.target.closest('[data-role="attachment"]');"existing"===i.getAttribute("data-status")?i.setAttribute("data-status","removed"):O.DOM.remove(i)}return this.registry=this.registry||{},this.registry.addImage={attributes:{onclick:t.bind(this,!1)}},this.registry.addImages={attributes:{onclick:t.bind(this,!0)}},this.registry.replaceImage={attributes:{onclick:e.bind(this)}},this.registry.removeImage={attributes:{onclick:a.bind(this)}},this.registry.resetImage={attributes:{onclick:h.bind(this)}},this.registry.copyImage={attributes:{onclick:c.bind(this)}},this.resizeImage=d.bind(this),this.registry.removeAttachment={attributes:{onclick:m.bind(this)}},this.getImageList=function(t,i){for(var e=[],s=0,n=t.length;n>s;s++){var r=t[s];r!==i&&e.push(this.api.getProfileImageURL(r))}return{image:e}},this}.call(app),app="undefined"!=typeof app?app:{},function(){"use strict";function t(t,i){i({isAuthenticated:this.isAuthenticated})}return this.registry=this.registry||{},this.registry.homePage={preprocess:t.bind(this)},this}.call(app),app="undefined"!=typeof app?app:{},function(){"use strict";function t(t){switch(t.type){case"checkbox":return t.checked!==t.defaultChecked;case"select-one":return!t.options[t.selectedIndex].defaultSelected;default:return t.value!==t.defaultValue}}function i(t){switch(t.type){case"checkbox":return t.checked;case"select-one":return!t.options[t.selectedIndex].value;default:return t.value}}return this.registry=this.registry||{},this.getFormFields=function(e,s){var n=e.elements,r={},o=[];for(var a in n)if(n.hasOwnProperty(a)){var h=n[a];(h.name&&h.name.length>0&&!s||t(h))&&("function"==typeof h.checkValidation&&h.checkValidation()===!1?o.push(element):h.name&&h.name.length>0&&(r[h.name]=i(h)))}if(o.length>0){var c=new Error("validation-erros");throw c.fields=o,c}return r}.bind(this),this.getDirtyFormFields=function(t){return this.getFormFields(t,!0)}.bind(this),this.setValidationMessage=function(t,i){t.setCustomValidity(i);var e=O.ELM[t.id+"Errors"];e&&(e.innerHTML=i)}.bind(this),this}.call(app),app="undefined"!=typeof app?app:{},function(){function t(t,e){if(Object.keys(e).length>0){for(var s=[],n=t.length,r=0;n>r;r++){var o=i(this.clone(t[r]),e);o&&s.push(o)}return s}return t}function i(t,i){for(var e=Object.keys(i),s=0,n=e.length;n>s;s++){var r=e[s],o=i[r];if(!(t[r].indexOf(o)>-1))return!1;t[r]=t[r].replace(o,O.TPL.render({selectedText:{text:o}}))}return t}return this.getFilteredItems=t,this}.call(app),app="undefined"!=typeof app?app:{},function(){"use strict";function t(){location.href;return html2canvas(document.body,{onrendered:i.bind(this)}),!0}function i(t){window.setTimeout(s.bind(this,t.toDataURL(),url),1)}function e(t,i){document.title=O.TPL.translate("title.feedback"),i()}function s(t,i){O.ELM.url.value=i,O.ELM.screenshotSample.src=t,O.ELM.screenshotRow.removeAttribute("data-hidden"),this.resizeImage(t,1280,1280,n)}function n(t){O.ELM.image.value=t}function r(t){try{var i=this.getFormFields(t.target);i.feedbackIncludesScreenshot||delete i.image,this.api.feedback(i,o.bind(this))}catch(e){this.log(e,"debug")}return!1}function o(){this.notify({notifySuccessFeedbackSent:{}})}return this.registry=this.registry||{},this.registry.sendFeedback={attributes:{onclick:t.bind(this)}},this.registry.feedbackPage={preprocess:e},this.registry.frmFeedback={attributes:{onsubmit:r.bind(this)}},this}.call(app),function(){"use strict";function t(t,e){if(!this.isAuthenticated())return history.back(),e({}),!1;document.title=O.TPL.translate("title.communitySettings");var s=this.state.community;void 0!==s&&s.length>0?this.api.async({getCommunity:this.api.getCommunity.bind(this,s),getAllUserImages:this.api.getAllUserImages.bind(this)},i.bind(this,e)):this.updateURL("communities","")}function i(t,i){var e=i.getCommunity.community,s=i.getCommunity.membership;if(this.state.communityJSON=e,this.state.membershipJSON=s,void 0===s||"active"!==s.status)return void this.updateURL("community:"+e.id+"/");document.title="".concat(e.name," ",O.TPL.translate("title.settings"));var n={communityId:e.id,communityName:e.name,hasImage:s.hasImage,profileImage:s.hasImage?this.api.getProfileImageURL(s.id):"",images:this.getImageList(i.getAllUserImages.images,s.id)};n.memberName=s.name,n.email=this.state.email,t(n)}function e(t){var i=O.ELM.profileImagePreview;try{var e={membership:this.getDirtyFormFields(t.target)};e.membershipImage=i.src,Object.keys(e.membership).length>0||i.getAttribute("data-dirty")?this.api.updateMembership(this.state.membershipJSON.id,e,this.updateURL.bind({},"community:"+this.state.community+"/")):this.updateURL("community:"+this.state.community+"/")}catch(s){if(s.errors.length)for(var n=0,r=s.errors.length;r>n;n++)this.log(s.errors[n],this.logType.error)}return!1}function s(t){var i=t.target;if(this.setValidationMessage(i,O.TPL.translate("message.checkingIfNameBeingUsed")),i.value.length>0){var e={membership:{communityId:this.state.community,name:i.value}};this.api.membershipExists(e,n.bind(this,i))}else this.setValidationMessage(i,O.TPL.translate("message.thisFieldIsRequired"))}function n(t,i){this.setValidationMessage(t,"false"===i.exists?O.TPL.translate("message.namedAlreadyBeingUsed"):"")}this.registry=this.registry||{},this.registry.communitySettingsPage={preprocess:t.bind(this)},this.registry.frmMembershipSettings={attributes:{onsubmit:e.bind(this)}},this.registry.uniqueMemberName={attributes:{onchange:s.bind(this)}}}.call(function(t){var i="undefined"!=typeof window?window:module?module.exports:i;return void 0===i[t]&&(i[t]={}),i[t]}("app")),function(){"use strict";function t(t,i){var e=i.getCommunity.community,s=i.getCommunity.membership;document.title=e.name,this.state.communityJSON=e,e.membership=s;var n=!!s&&"active"===s.status,r={communityId:e.id,communityName:e.name,isMember:n,topics:{topic:[]},emptyTopic:{id:"",content:"",images:{image:[]},contentLength:this.getPostLengthString("",e.topicLength)}};r.isMember?r.memberName=e.membership.name?i.getCommunity.membership.name:"":r.joinLink=this.isAuthenticated()?"#community:{{communityId}}/join":"#join",r.email=this.state.user?this.state.user.email:"",t(r)}function i(t){return this.confirm(O.TPL.translate("confirm.leaveCommunity"),e.bind(this)),!1}function e(t){t&&this.api.quitCommunity(this.state.community,s.bind(this))}function s(){delete this.state.community,delete this.state.communityJSON,this.updateURL("community/",O.TPL.translate("pageTitle.community"));
}this.registry=this.registry||{},this.registry.communityPage={preprocess:function(i,e){var s=this.state.community;void 0!==s&&s.length>0?this.api.async({getCommunity:this.api.getCommunity.bind(this,s)},t.bind(this,e)):this.updateURL("communities","")}.bind(this)},this.registry.btnLeave={attributes:{onclick:i.bind(this)}}}.call(function(t){var i="undefined"!=typeof window?window:module?module.exports:i;return void 0===i[t]&&(i[t]={}),i[t]}("app")),function(){"use strict";function t(t,e){var s=this.registry.communityList.cached;s?e({communities:{community:this.getFilteredItems.call(this,s,n)}}):this.api.getCommunityList(i.bind(this,e))}function i(t,i){for(var e,s=i.communities,r=0,o=s.length;o>r;r++)e=s[r],e.mdDescription=e.description?this.htmlize(e.description):"";this.state.communities=s,t({communities:{community:this.getFilteredItems.call(this,s,n)}})}function e(t){n.name=t.target.value,this.registry.communityList.cached=this.state.communities,this.register(document.querySelector('[data-register="communityList"]')),delete this.registry.communityList.cached}function s(t,e){var s=this.registry.topCommunities.cached;s?e({communities:{community:this.getFilteredItems.call(this,s,n)}}):this.api.getTopCommunities(1,10,i.bind(this,e))}this.registry=this.registry||{};var n={};this.registry.communitiesPage={preprocess:function(t,i){document.title=O.TPL.translate("title.communities"),i({isAuthenticated:this.isAuthenticated()})}.bind(this)},this.registry.communityList={preprocess:t.bind(this)},this.registry.filterCommunities={attributes:{onkeyup:e.bind(this)}},this.registry.topCommunities={preprocess:s.bind(this),template:"communityList"}}.call(function(t){var i="undefined"!=typeof window?window:module?module.exports:i;return void 0===i[t]&&(i[t]={}),i[t]}("app")),function(){"use strict";function t(t,i){var e=i.getCommunity.community,s=i.getCommunity.membership;s&&"active"===s.status?this.updateURL("community:"+e.id+"/"):s={name:"",hasImage:!1,id:void 0};var n={isAuthenticated:this.isAuthenticated(),communityId:e.id,communityName:e.name,memberName:s.name,hasImage:s.hasImage,profileImage:"",images:this.getImageList(i.getAllUserImages.images,s.id)};t(n)}function i(t){var i=O.ELM.profileImagePreview,s={membership:this.getFormFields(t.target),membershipImage:"true"===i.getAttribute("data-dirty")?i.src:void 0},n=this.state.community;return this.api.joinCommunity(n,s,e.bind(this,n)),!1}function e(t,i){i instanceof Error?409===i.status?this.updateURL("community:"+t+"/"):(this.log(i,this.logType.debug),alert("failed to join community")):this.updateURL("community:"+t+"/")}this.registry=this.registry||{},this.registry.communityJoinPage={preprocess:function(i,e){document.title=O.TPL.translate("title.communityJoin");var s=this.state.community;void 0!==s&&s.length>0?this.api.async({getCommunity:this.api.getCommunity.bind(this,s),getAllUserImages:this.api.getAllUserImages.bind(this)},t.bind(this,e)):this.updateURL("communities","")}.bind(this)},this.registry.frmJoinCommunity={attributes:{onsubmit:i.bind(this)}}}.call(function(t){var i="undefined"!=typeof window?window:module?module.exports:i;return void 0===i[t]&&(i[t]={}),i[t]}("app")),function(){"use strict";function t(t,e){return this.isAuthenticated()?void this.api.async({getMyMemberships:this.api.getMyMemberships.bind(this),getAllUserImages:this.api.getAllUserImages.bind(this)},i.bind(this,e)):(history.back(),e({}),!1)}function i(t,i){for(var e=i.getMyMemberships.memberships,s="",n=0,r={},o=0,a=e.length;a>o;o--){var h=e[o].name,c=r[h];c=void 0===r[h]?1:c+1,r[h]=c,c>=n&&(s=h,n=c)}t({founderName:s,hasImage:!1,profileImage:"",images:this.getImageList(i.getAllUserImages.images,void 0)})}function e(t){var i=t.target,e=this.getFormFields(i);return"sending"!==i.getAttribute("data-status")&&(i.setAttribute("data-status","sending"),this.api.addCommunity({community:{name:e.name,description:e.description},founder:{name:e.founderName},founderImage:O.ELM.profileImagePreview.src},s.bind(this,i))),!1}function s(t,i){t.setAttribute("data-status",""),i instanceof Error||!i?(this.notify({notifySystem:{message:O.TPL.translate("notify.failedToAddCommunity"),status:"error"}}),this.log(i,this.logType.debug)):this.updateURL("community:"+i.community.id+"/")}function n(t){var i=t.target;this.setValidationMessage(i,O.TPL.translate("message.checkingIfNameBeingUsed")),i.value.length>0?this.api.communityExists({community:{name:i.value}},r.bind(this,i)):this.setValidationMessage(i,O.TPL.translate("message.thisFieldIsRequired"))}function r(t,i){this.setValidationMessage(t,i.exists?O.TPL.translate("message.namedAlreadyBeingUsed"):"")}this.registry=this.registry||{},this.registry.communityAddPage={preprocess:t.bind(this)},this.registry.frmAddCommunity={attributes:{onsubmit:e.bind(this)}},this.registry.uniqueCommunityName={attributes:{onchange:n.bind(this)}}}.call(function(t){var i="undefined"!=typeof window?window:module?module.exports:i;return void 0===i[t]&&(i[t]={}),i[t]}("app")),app="undefined"!=typeof app?app:{},function(){"use strict";function t(t,i,e,s){var n,r,o=s.comments||[],a=this.state.communityJSON,h=s.authors||{},c=a.membership?a.membership.id:!1;this.addImagesToAuthors(h);for(var d=0,u=o.length;u>d;d++)n=o[d],n.author=h[n.authorId],n.mdContent=this.htmlize(n.content),n.isEditable=c===n.author.id&&0===n.comments&&0===n.endorse,n.isMember=!!c,n.time=moment(n.modified).format("MMM Do YY, h:mma"),n.relativeTime=moment(n.modified).fromNow(),n.images={image:this.getAttachmentsURL(n.images)},n.isEditable&&(n.opinionId=t?t:"",n.parentId=i?i:"",n.isReadMode=!0,n.contentLength=this.getPostLengthString(n.content,a.opinionLength)),r=s.viewpoints[n.id],r?(n.isEndorsed=!!r.endorse,n.isFollowed=!!r.follow,n.isRead=!!r.read):n.isEndorsed=n.isFollowed=n.isRead=!1;e({emptyComment:{id:"",opinionId:t?t:"",parentId:i?i:"",content:"",isReadMode:!1,images:{image:[]},contentLength:this.getPostLengthString("",a.opinionLength)},comments:{comment:o}})}function i(t){var i,s,n=t.target,r=this.getFormFields(n);if(r.parentId.length>0?(i="comment",s=r.parentId):(i="opinion",s=r.opinionId,delete r.parentId),0===r.id.length&&delete r.id,this.models.comment.content.validate(r.content,this.state.communityJSON)){var o={comment:r,images:{added:this.getAttachedImages(n),removed:this.getDetachedImages(n)}};this.api.setComment(o,e.bind(this,n,i,s,void 0===r.id))}else this.log("bad comment",this.logType.error);return!1}function e(t,i,e,s){if(s){var n=O.ELM[i+"-"+e];this.updateCount(n,"comment",1),this.removeArchiveButton(i,e)}this.register(O.ELM["".concat(i,"-",e,"-comments")])}return this.registry=this.registry||{},this.registry.commentList={preprocess:function(i,e){var s=i.getAttribute("data-opinion-id"),n=i.getAttribute("data-comment-id");this.api.getPostComments(s,n,t.bind(this,s,n,e))}.bind(this)},this.registry.frmSetComment={attributes:{onsubmit:i.bind(this)}},this}.call(app),function(){"use strict";function t(t,i){var e=O.COOKIE("authToken");if(void 0!==e)return{credentials:e};if(t)return{};var s=new Error("unauthorized");return i(s),s}function i(t,i,e,s,n){s[t]=n,0===--i.counter&&e(s)}function e(t,i){this.api.get("topic/"+t+"/opinions",i,!0)}function s(t,i){t.opinion.id?this.api.post("opinion/"+t.opinion.id,t,i):t.opinion.topicId?this.api.put("topic/"+t.opinion.topicId+"/opinions",t,i):i(new Error("missing-details"))}this.api=this.api||{backend:server,cache:{},cacheExpiration:18e4},this.api.saveToCache=function(t,i,e){this.api.cache[t]={modified:(new Date).getTime(),response:e},i(e)}.bind(this),this.api.get=function(i,e,s){var n=t(s,e);if(!(n instanceof Error)){var r=this.api.cache;r[i]&&r[i].modified>(new Date).getTime()-this.api.cacheExpiration?e(r[i].response):O.AJAX.get(this.api.backend+i,this.api.ifNotError.bind(this,this.api.saveToCache.bind(this,i,e)),n)}}.bind(this),this.api["delete"]=function(i,e,s){var n=t(s,e);n instanceof Error||(this.api.clearCache(),O.AJAX["delete"](this.api.backend+i,this.api.ifNotError.bind(this,e),n))}.bind(this),this.api.post=function(i,e,s,n){var r=t(n,s);r instanceof Error||(this.api.clearCache(),O.AJAX.post(this.api.backend+i,e,this.api.ifNotError.bind(this,s),r))}.bind(this),this.api.put=function(i,e,s,n){var r=t(n,s);r instanceof Error||(this.api.clearCache(),O.AJAX.put(this.api.backend+i,e,this.api.ifNotError.bind(this,s),r))}.bind(this),this.api.clearCache=function(t){void 0===t?this.api.cache={}:delete this.api.cache[t]}.bind(this),this.api.ifNotError=function(t,i){if(i instanceof Error)switch(i.status){case 0:O.EVT.dispatch("connection-error",i.message);break;case 401:this.handleUnauthorized();break;default:this.log(i,this.logType.debug)}else t(i)}.bind(this),this.api.async=function(t,e){for(var s=Object.keys(t),n={},r={counter:s.length},o=0,a=s.length;a>o;o++){var h=s[o],c=t[h];c(i.bind(this,h,r,e,n))}}.bind(this),this.api.ping=function(t){this.api.get("ping",this.api.ifNotError.bind(this,t),!0)}.bind(this),this.api.postConnectionToken=function(t,i,e,s){var n={email:t,subject:i,content:e};this.api.post("user/connect/",n,s)}.bind(this),this.api.getAuthToken=function(t,i){this.api.get("user/connect/"+t,i)}.bind(this),this.api.getUser=function(t){this.api.get("user/",t)}.bind(this),this.api.getAllUserImages=function(t){this.api.get("membership/all/images",t)}.bind(this),this.api.updateProfileImage=function(t,i,e){this.api.put("".concat("membership/",t,"/image"),i,e)}.bind(this),this.api.getProfileImageURL=function(t){return"".concat(this.api.backend,"membership/",t,"/image")}.bind(this),this.api.updateMembership=function(t,i,e){this.api.post("".concat("membership/",t),i,e)}.bind(this),this.api.membershipExists=function(t,i){this.api.post("".concat("membership/exists"),t,i)}.bind(this),this.api.getTopCommunities=function(t,i,e){this.api.get("community/top/"+i+"/page/"+t,e,!0)}.bind(this),this.api.addCommunity=function(t,i){this.api.put("community/",t,i)}.bind(this),this.api.getCommunityList=function(t){this.api.get("community/",t,!0)}.bind(this),this.api.getMyMemberships=function(t){this.api.get("membership/",t)}.bind(this),this.api.getCommunity=function(t,i){this.api.get("community/"+t+"/",i,!0)}.bind(this),this.api.getCommunityTopics=function(t,i){this.api.get("community/"+t+"/topics/",i,!0)}.bind(this),this.api.joinCommunity=function(t,i,e){this.api.put("community/"+t+"/membership/",i,e)}.bind(this),this.api.quitCommunity=function(t,i){this.api.clearCache("community/"),this.api.get("community/"+t+"/quit/",i)}.bind(this),this.api.communityExists=function(t,i){this.api.post("community/exists",t,i)}.bind(this),this.api.getTopTags=function(t,i,e){this.api.get("topic/tag/"+i+"/page/"+t,e,!0)}.bind(this),this.api.archive=function(t,i,e){this.api["delete"]("".concat(t,"/",i),e)}.bind(this),this.api.getAttachmentURL=function(t){return"".concat(this.api.backend,"attachment/",t)}.bind(this),this.api.getTopTopics=function(t,i,e){this.api.get("topic/top/"+i+"/page/"+t,e,!0)}.bind(this),this.api.getTopicsByTag=function(t,i){this.api.get("topic/tag/"+t.join("+"),i,!0)}.bind(this),this.api.getCommunityTopics=function(t,i){this.api.get("community/"+t+"/topics",i,!0)}.bind(this),this.api.setTopic=function(t,i){this.api.post("topic/",t,i)}.bind(this),this.api.getTopicOpinions=e.bind(this),this.api.setOpinion=s.bind(this),this.api.getPostComments=function(t,i,e){i?this.api.get("comment/"+i+"/comments",e):t?this.api.get("opinion/"+t+"/comments",e):e(new Error("missing-details"))}.bind(this),this.api.setComment=function(t,i){var e=t.comment;e.id?this.api.post("comment/"+e.id,t,i):e.parentId?this.api.put("comment/"+e.parentId+"/comments",t,i):e.opinionId?this.api.put("opinion/"+e.opinionId+"/comments",t,i):i(new Error("missing-details"))}.bind(this),this.api.feedback=function(t,i){this.api.put("feedback/",t,i,!0)}.bind(this),this.api.setAttribute=function(t,i,e,s){this.api.get("".concat(t,"/",i,"/",e),s)}.bind(this)}.call(function(t){var i="undefined"!=typeof window?window:module?module.exports:i;return void 0===i[t]&&(i[t]={}),i[t]}("app"));