/*! theodorus 2014-10-24 */
!function(){var a="undefined"!=typeof a?a:require("./AbstractModel"),b=a.model({autoId:!0,collection:"communities",key:"community_id",schema:{community_id:{type:"serial",isNullOk:!1},name:{type:"text",size:20,key:!0,isNullOk:!1},settings:{type:"text"}}});"undefined"!=typeof exports&&(exports.model=function(){return b})}(),function(){var a="undefined"!=typeof a?a:require("./AbstractModel"),b=a.model({autoId:!1,collection:"credentials",key:"auth_key",schema:{auth_key:{type:"text",size:128,isUnique:!0,isNullOk:!1},password:{type:"text",size:128,isNullOk:!1},user_id:{type:"integer",isNullOk:!1,isSecondaryKey:!0}}});"undefined"!=typeof exports&&(exports.model=function(){return b})}(),function(){var a="undefined"!=typeof a?a:require("./AbstractModel"),b=a.model({autoId:!1,collection:"model_update",key:"model",schema:{model:{type:"text",size:20,isNullOk:!1},modified:{type:"date",time:!0,isNullOk:!1}}});"undefined"!=typeof exports&&(exports.model=function(){return b})}(),function(){var a="undefined"!=typeof a?a:require("./AbstractModel"),b=a.model({autoId:!0,isSlugValid:function(a){return/^[a-zA-Z0-9\-\.%_]{5,140}$/.test(a)},incrementStatus:function(){var a=this.get("status");if("undefined"==typeof a)throw new Error("incrementStatus can only run on instances");switch(a){case"idea":a="discussion";break;case"discussion":a="draft";break;case"draft":a="proposal";break;case"proposal":a="agreement"}return this.set("status",a),a},collection:"topics",key:"topic_id",schema:{topic_id:{type:"serial",isNullOk:!1},user_id:{type:"integer",isNullOk:!1,isSecondaryKey:!0},slug:{type:"text",size:20,isSecondaryKey:!0,isNullOk:!1},created:{type:"date",time:!0,isNullOk:!1},modified:{type:"date",time:!0,isNullOk:!1},title:{type:"text",size:140,isNullOk:!1},seen:{type:"integer",defaultValue:0},follow:{type:"integer",defaultValue:0},endorse:{type:"integer",defaultValue:0},report:{type:"integer",defaultValue:0},opinion:{type:"integer",defaultValue:0},comment:{type:"integer",defaultValue:0},votes_required:{type:"integer",defaultValue:0},status:{type:"enum",values:["idea","discussion","draft","proposal","agreement","removed"],defaultValue:"na",isNullOk:!0},report_status:{type:"enum",values:["na","questioned","ok","irrelevant","offensive","spam","violent","selfcensor"],defaultValue:"idea",isNullOk:!0},score:{type:"number",isNullOk:!1,isSecondaryKey:!0}}});b.Read=a.model({autoId:!1,collection:"topic_read",key:"topic_id",schema:{topic_id:{type:"integer",isNullOk:!1},content:{type:"object"}}}),b.Section=a.model({autoId:!0,collection:"topic_section",key:"section_id",schema:{section_id:{type:"serial",isNullOk:!1},topic_id:{type:"integer",isNullOk:!1},before_section_id:{type:"integer",defaultValue:0},best_alternative_id:{type:"integer",defaultValue:0},opposed:{type:"integer",defaultValue:0}}}),b.Alternative=a.model({autoId:!0,collection:"topic_section_alternative",key:"alt_id",schema:{alt_id:{type:"serial",isNullOk:!1},section_id:{type:"integer",isNullOk:!1},user_id:{type:"integer",isNullOk:!1,key:!0,isSecondaryKey:!0},created:{type:"date",time:!0,isNullOk:!1},content:{type:"text"},votes:{type:"integer",defaultValue:0}}}),"undefined"!=typeof exports&&(exports.model=function(){return b})}(),function(){var a="undefined"!=typeof a?a:require("./AbstractModel"),b=a.model({autoId:!0,collection:"users",key:"user_id",schema:{user_id:{type:"serial",isNullOk:!1},slug:{type:"text",size:20,isSecondaryKey:!0,isNullOk:!1},display_name:{type:"text",size:20,isSecondaryKey:!0,isNullOk:!1},score:{type:"number",defaultValue:0},picture:{type:"text",size:250}}});b.initialPermissions={endorse:!0,suggest:!0,feedback:!0,comment:!0},b.Account=a.model({autoId:!0,collection:"users",key:"user_id",can:function(a){var b=this.get("permissions");"undefined"==typeof b&&(b={},this.set("permissions",b));var c=b[a];return"undefined"!=typeof c&&c},schema:{user_id:{type:"serial",isNullOk:!1},slug:{type:"text",size:20,isSecondaryKey:!0,isNullOk:!1},display_name:{type:"text",size:20,isSecondaryKey:!0,isNullOk:!1},score:{type:"number",defaultValue:0},picture:{type:"text",size:250},permissions:{type:"object"}}}),b.Topic=a.model({autoId:!0,collection:"user_topic",key:"user_topic_id",schema:{user_topic_id:{type:"serial",isNullOk:!1},user_id:{type:"number",isNullOk:!1,isSecondaryKey:!0},topic_id:{type:"number",isNullOk:!1,isSecondaryKey:!0},seen:{type:"boolean",defaultValue:!1},follow:{type:"boolean",defaultValue:!1},endorse:{type:"boolean",defaultValue:!1},report:{type:"boolean",defaultValue:!1},score:{type:"number",defaultValue:0}}}),b.TopicDraft=a.model({collection:"user_topic_draft",key:["user_id","topic_id"],schema:{user_id:{type:"number",isNullOk:!1,isSecondaryKey:!0},topic_id:{type:"number",isNullOk:!1,isSecondaryKey:!0},selections:{type:"object"}}}),b.Comment=a.model({collection:"user_comment",key:["user_id","comment_id"],schema:{user_id:{type:"number",isNullOk:!1},comment_id:{type:"number",isNullOk:!1,isSecondaryKey:!0},seen:{type:"boolean",defaultValue:!1},follow:{type:"boolean",defaultValue:!1},endorse:{type:"boolean",defaultValue:!1},report:{type:"boolean",defaultValue:!1},score:{type:"number",defaultValue:0}}}),"undefined"!=typeof exports&&(exports.model=function(){return b})}();