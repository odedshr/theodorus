/*! theodorus 2014-09-20 */
!function(){var a=_.extend({},{init:function(){$("body").addClass("loaded-fonts"),$(".force-web-font-preload").remove();var a=function(){};"undefined"!=typeof theodorusUIVersion&&"undefined"!=typeof Storage&&theodorusUIVersion!=localStorage.getItem("theodorus_version")?XSLT.preloadXSLT(function(){localStorage.setItem("theodorus_version",theodorusUIVersion),XSLT.useLocalStorage=!0,a()}):a()},fixTimeReferences:function(){for(var a=document.getElementsByTagName("time"),b=[],c=0,d=a.length;c!=d;b.push(a[c++]));b.forEach(function(a){XSLT.transform(a,{datetime:PrettyDate.render(a.getAttribute("datetime"))},function(){})})},colorTags:function(){var a={};$(".tag:not(.tag-colored)").each(function(){var b=$(this),c=b.children(".tag-label").text();if(!a[c]){for(var d=0,e=0;e<c.length;e++)d+=c.charCodeAt(e);a[c]=d%5}b.addClass("tag-colored").addClass("tag-color-"+a[c])})},parseURL:function(){},onAccountLoaded:function(a){this.io.user=new User.Account(a),this.app.render()},log:function(){try{console.log.apply(console,arguments)}catch(a){try{opera.postError.apply(opera,arguments)}catch(b){alert(Array.prototype.join.call(arguments," "))}}},api:$,io:{docURL:null,refreshFeed:function(){this.app.reload&&this.app.reload()},openPage:function(a,b,c){window.history.pushState({state:a},event.target.innerHTML,a),this.parseURL(),c&&c()},notify:function(a,b){switch(a){case"notify":console.log(a+":"+b);break;case"error":case"info":"undefined"==typeof b?$("#messages").html(""):transform("#messages","<message type='"+a+"' message='"+b+"' />");break;case"announcement":case"critical":alert(a+":"+b)}},user:null},namespace:function(a){var b=this;if(a){var c=a.split(".");for(var d in c)b[c[d]]||(b[c[d]]={}),b=b[c[d]]}return b}});_.bindAll(a,"init","namespace","onAccountLoaded","parseURL"),window.onload=a.init}();