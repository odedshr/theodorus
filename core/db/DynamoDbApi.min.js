var crypto=require("crypto"),db=require("./DynamoDb");exports.init=function(a){db.init(a)};exports.generateId=function(a,b){db.generateId(a,b)};exports.getCredentials=function(a,b){var c=require("../user/Credentials");db.getItem(c.create(),a,function(a){b(c.create(a))})};exports.getUser=function(a,b){var c=require("../user/User");db.getItem(c.create(),a,function(a){b(c.create(a))})};exports.save=function(a,b){db.save(a,b)};
exports.signup=function(a,b,c){var d=this.getUniqueId("credentials");db.putItem("credentials",{credentials_id:getCredentialsKey(a,b,c),user_id:d});db.putItem("credentials",{user_id:d});return d};exports.signin=function(a,b,c){db.getItem("credentials",{credentials_id:getCredentialsKey(a,b,c)})};function getCredentialsKey(a,b,c){return a+">"+b+">"+md5(c)}function md5(a){return crypto.createHash("md5").update(a).digest("hex")};
